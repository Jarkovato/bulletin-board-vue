(function(t){function e(e){for(var a,o,i=e[0],l=e[1],c=e[2],d=0,p=[];d<i.length;d++)o=i[d],Object.prototype.hasOwnProperty.call(n,o)&&n[o]&&p.push(n[o][0]),n[o]=0;for(a in l)Object.prototype.hasOwnProperty.call(l,a)&&(t[a]=l[a]);u&&u(e);while(p.length)p.shift()();return s.push.apply(s,c||[]),r()}function r(){for(var t,e=0;e<s.length;e++){for(var r=s[e],a=!0,i=1;i<r.length;i++){var l=r[i];0!==n[l]&&(a=!1)}a&&(s.splice(e--,1),t=o(o.s=r[0]))}return t}var a={},n={app:0},s=[];function o(e){if(a[e])return a[e].exports;var r=a[e]={i:e,l:!1,exports:{}};return t[e].call(r.exports,r,r.exports,o),r.l=!0,r.exports}o.m=t,o.c=a,o.d=function(t,e,r){o.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:r})},o.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},o.t=function(t,e){if(1&e&&(t=o(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var r=Object.create(null);if(o.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var a in t)o.d(r,a,function(e){return t[e]}.bind(null,a));return r},o.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return o.d(e,"a",e),e},o.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},o.p="/";var i=window["webpackJsonp"]=window["webpackJsonp"]||[],l=i.push.bind(i);i.push=e,i=i.slice();for(var c=0;c<i.length;c++)e(i[c]);var u=l;s.push([0,"chunk-vendors"]),r()})({0:function(t,e,r){t.exports=r("56d7")},4251:function(t,e,r){},"56d7":function(t,e,r){"use strict";r.r(e);r("e260"),r("e6cf"),r("cca6"),r("a79d");var a=r("2b0e"),n=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("v-app",[r("v-navigation-drawer",{attrs:{app:"",temporary:""},model:{value:t.drawer,callback:function(e){t.drawer=e},expression:"drawer"}},[r("v-list",[t._l(t.links,(function(e){return r("v-list-item",{key:e.title,attrs:{to:e.url}},[r("v-list-item-content",[r("v-list-item-title",[r("v-icon",{attrs:{left:""}},[t._v(" "+t._s(e.icon)+" ")]),t._v(" "+t._s(e.title)+" ")],1)],1)],1)})),t.isUserLoggedIn?r("v-list-item",{on:{click:t.onLogout}},[r("v-list-item-content",[r("v-list-item-title",[r("v-icon",{attrs:{left:""}},[t._v(" mdi-logout ")]),t._v(" Выйти ")],1)],1)],1):t._e()],2)],1),r("v-app-bar",{attrs:{app:"",dark:"",color:"#37474F"}},[r("v-app-bar-nav-icon",{staticClass:"hidden-md-and-up",on:{click:function(e){t.drawer=!t.drawer}}}),r("v-toolbar-title",[r("router-link",{staticClass:"pointer",attrs:{to:"/",tag:"span"}},[t._v(" Доска объявлений")])],1),r("v-spacer"),r("v-toolbar-items",{staticClass:"hidden-sm-and-down"},[t._l(t.links,(function(e){return r("v-btn",{key:e.title,attrs:{text:"",small:"",to:e.url}},[r("v-icon",{attrs:{color:"teal darken-2",left:""}},[t._v(" "+t._s(e.icon)+" ")]),t._v(" "+t._s(e.title)+" ")],1)})),t.isUserLoggedIn?r("v-btn",{attrs:{text:"",small:""},on:{click:t.onLogout}},[r("v-icon",{attrs:{left:"",color:"teal darken-2"}},[t._v("mdi-logout")]),t._v(" Выйти ")],1):t._e()],2)],1),r("v-main",[r("router-view")],1),[t.error?r("v-snackbar",{attrs:{timeout:5e3,"multi-line":!0,color:"373737",value:!0},on:{input:t.closeError}},[r("v-layout",{attrs:{column:"","align-center":""}},[r("div",{staticClass:"pa-2 font-weight-black"},[t._v(t._s(t.error))]),r("v-btn",{attrs:{color:"orange",medium:""},nativeOn:{click:function(e){return t.closeError(e)}}},[t._v(" Закрыть ")])],1)],1):t._e()]],2)},s=[],o={data:function(){return{drawer:!1}},computed:{error:function(){return this.$store.getters.error},isUserLoggedIn:function(){return this.$store.getters.isUserLoggedIn},links:function(){return this.isUserLoggedIn?[{title:"Покупатели",icon:"mdi-book-open",url:"/orders"},{title:"Добавить",icon:"mdi-playlist-plus",url:"/new"},{title:"Мои объявления",icon:"mdi-clipboard-list",url:"/list"}]:[{title:"Логин",icon:"mdi-login",url:"/login"},{title:"Регистрация",icon:"mdi-account-plus",url:"/registration"}]}},methods:{closeError:function(){this.$store.dispatch("clearError")},onLogout:function(){this.$store.dispatch("logoutUser"),this.$router.push("/")}}},i=o,l=(r("5c0b"),r("2877")),c=r("6544"),u=r.n(c),d=r("7496"),p=r("40dc"),v=r("5bc1"),m=r("8336"),f=r("132d"),h=r("a722"),g=r("8860"),x=r("da13"),b=r("5d23"),w=r("f6c4"),y=r("f774"),V=r("2db4"),_=r("2fa4"),k=r("2a7f"),C=Object(l["a"])(i,n,s,!1,null,null,null),L=C.exports;u()(C,{VApp:d["a"],VAppBar:p["a"],VAppBarNavIcon:v["a"],VBtn:m["a"],VIcon:f["a"],VLayout:h["a"],VList:g["a"],VListItem:x["a"],VListItemContent:b["a"],VListItemTitle:b["c"],VMain:w["a"],VNavigationDrawer:y["a"],VSnackbar:V["a"],VSpacer:_["a"],VToolbarItems:k["a"],VToolbarTitle:k["b"]});var E=r("f309");r("bf40");a["a"].use(E["a"]);var O=new E["a"]({}),P=r("8c4f"),$=r("2f62"),I=(r("a4d3"),r("e01a"),r("99af"),r("4de4"),r("7db0"),r("4160"),r("baa5"),r("fb6a"),r("b0c0"),r("b64b"),r("159b"),r("5530")),j=(r("96cf"),r("1da1")),R=r("d4ec"),S=r("8aa5"),T=function t(e,r,a){var n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"",s=arguments.length>4&&void 0!==arguments[4]&&arguments[4],o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:null;Object(R["a"])(this,t),this.title=e,this.description=r,this.ownerId=a,this.imageSrc=n,this.promo=s,this.id=o},U={state:{posts:[]},mutations:{createPost:function(t,e){console.log(e),t.posts.push(e)},loadPosts:function(t,e){t.posts=e},updatePost:function(t,e){var r=e.title,a=e.description,n=e.id,s=t.posts.find((function(t){return t.id===n}));s.title=r,s.description=a}},actions:{createPost:function(t,e){return Object(j["a"])(regeneratorRuntime.mark((function r(){var a,n,s,o,i,l,c,u;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return a=t.commit,n=t.getters,a("clearError"),a("setLoading",!0),s=e.image,r.prev=4,o=new T(e.title,e.description,n.user.id,"",e.promo),r.next=8,S["database"]().ref("posts").push(o);case 8:return i=r.sent,l=s.name.slice(s.name.lastIndexOf(".")),r.next=12,S["storage"]().ref("posts/".concat(i.key,".").concat(l)).put(s);case 12:return c=r.sent,r.next=15,S["storage"]().ref().child(c.ref.fullPath).getDownloadURL();case 15:return u=r.sent,r.next=18,S["database"]().ref("posts/"+i.key).set(Object(I["a"])(Object(I["a"])({},o),{},{imageSrc:u}));case 18:a("setLoading",!1),a("createPost",Object(I["a"])(Object(I["a"])({},o),{},{id:i.key,imageSrc:u})),r.next=27;break;case 22:throw r.prev=22,r.t0=r["catch"](4),a("setError",r.t0.message),a("setLoading",!1),r.t0;case 27:case"end":return r.stop()}}),r,null,[[4,22]])})))()},fetchPosts:function(t){return Object(j["a"])(regeneratorRuntime.mark((function e(){var r,a,n,s;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return r=t.commit,r("clearError"),r("setLoading",!0),a=[],e.prev=3,e.next=6,S["database"]().ref("posts").once("value");case 6:n=e.sent,s=n.val(),Object.keys(s).forEach((function(t){var e=s[t];a.push(new T(e.title,e.description,e.ownerId,e.imageSrc,e.promo,t))})),r("loadPosts",a),r("setLoading",!1),e.next=18;break;case 13:throw e.prev=13,e.t0=e["catch"](3),r("setError",e.t0.message),r("setLoading",!1),e.t0;case 18:case"end":return e.stop()}}),e,null,[[3,13]])})))()},updatePost:function(t,e){return Object(j["a"])(regeneratorRuntime.mark((function r(){var a,n,s,o;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return a=t.commit,n=e.title,s=e.description,o=e.id,a("clearError"),a("setLoading",!0),r.prev=4,r.next=7,S["database"]().ref("posts").child(o).update({title:n,description:s});case 7:a("updatePost",{title:n,description:s,id:o}),a("setLoading",!1),r.next=16;break;case 11:throw r.prev=11,r.t0=r["catch"](4),a("setError",r.t0.message),a("setLoading",!1),r.t0;case 16:case"end":return r.stop()}}),r,null,[[4,11]])})))()}},getters:{posts:function(t){return t.posts},promoPosts:function(t){return t.posts.filter((function(t){return t.promo}))},myPosts:function(t,e){return t.posts.filter((function(t){return t.ownerId===e.user.id}))},postById:function(t){return function(e){return t.posts.find((function(t){return t.id===e}))}}}},F=function t(e){Object(R["a"])(this,t),this.id=e},D={state:{user:null},mutations:{setUser:function(t,e){t.user=e}},actions:{registerUser:function(t,e){return Object(j["a"])(regeneratorRuntime.mark((function r(){var a,n,s,o;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return a=t.commit,n=e.email,s=e.password,a("clearError"),a("setLoading",!0),r.prev=4,r.next=7,S["auth"]().createUserWithEmailAndPassword(n,s);case 7:o=r.sent,a("setUser",new F(o.uid)),a("setLoading",!1),console.log("register",o.uid),r.next=18;break;case 13:throw r.prev=13,r.t0=r["catch"](4),a("setLoading",!1),a("setError",r.t0.message),r.t0;case 18:case"end":return r.stop()}}),r,null,[[4,13]])})))()},loginUser:function(t,e){return Object(j["a"])(regeneratorRuntime.mark((function r(){var a,n,s,o;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return a=t.commit,n=e.email,s=e.password,a("clearError"),a("setLoading",!0),r.prev=4,r.next=7,S["auth"]().signInWithEmailAndPassword(n,s);case 7:o=r.sent,a("setUser",new F(o.user.uid)),a("setLoading",!1),r.next=17;break;case 12:throw r.prev=12,r.t0=r["catch"](4),a("setLoading",!1),a("setError",r.t0.message),r.t0;case 17:case"end":return r.stop()}}),r,null,[[4,12]])})))()},autoLoginUser:function(t,e){var r=t.commit;r("setUser",new F(e.uid))},logoutUser:function(t){var e=t.commit;S["auth"]().signOut(),e("setUser",null)}},getters:{user:function(t){return t.user},isUserLoggedIn:function(t){return null!==t.user}}},q={state:{loading:!1,error:null},mutations:{setLoading:function(t,e){t.loading=e},setError:function(t,e){t.error=e},clearError:function(t){t.error=null}},actions:{setLoading:function(t,e){var r=t.commit;r("setLoading",e)},setError:function(t,e){var r=t.commit;r("setError",e)},clearError:function(t){var e=t.commit;e("clearError")}},getters:{loading:function(t){return t.loading},error:function(t){return t.error}}},A=function t(e,r,a){var n=arguments.length>3&&void 0!==arguments[3]&&arguments[3],s=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null;Object(R["a"])(this,t),this.name=e,this.phone=r,this.postId=a,this.done=n,this.id=s},B={state:{orders:[]},mutations:{loadOrders:function(t,e){t.orders=e,console.log(e)}},actions:{createOrder:function(t,e){return Object(j["a"])(regeneratorRuntime.mark((function r(){var a,n,s,o,i,l;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return a=t.commit,n=e.name,s=e.phone,o=e.postId,i=e.ownerId,l=new A(n,s,o),a("clearError"),r.prev=4,r.next=7,S["database"]().ref("/users/".concat(i,"/orders")).push(l);case 7:r.next=13;break;case 9:throw r.prev=9,r.t0=r["catch"](4),a("setError",r.t0.message),r.t0;case 13:case"end":return r.stop()}}),r,null,[[4,9]])})))()},fetchOrders:function(t){return Object(j["a"])(regeneratorRuntime.mark((function e(){var r,a,n,s,o;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return r=t.commit,a=t.getters,r("setLoading",!0),r("clearError"),n=[],e.prev=4,e.next=7,S["database"]().ref("/users/".concat(a.user.id,"/orders")).once("value");case 7:s=e.sent,o=s.val(),Object.keys(o).forEach((function(t){var e=o[t];n.push(new A(e.name,e.phone,e.postId,e.done,t))})),r("loadOrders",n),r("setLoading",!1),e.next=18;break;case 14:e.prev=14,e.t0=e["catch"](4),r("setLoading",!1),r("setError",e.t0.message);case 18:case"end":return e.stop()}}),e,null,[[4,14]])})))()},markOrderDone:function(t,e){return Object(j["a"])(regeneratorRuntime.mark((function r(){var a,n;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return a=t.commit,n=t.getters,a("clearError"),r.prev=2,r.next=5,S["database"]().ref("/users/".concat(n.user.id,"/orders")).child(e).update({done:!0});case 5:r.next=11;break;case 7:throw r.prev=7,r.t0=r["catch"](2),a("setError",r.t0.message),r.t0;case 11:case"end":return r.stop()}}),r,null,[[2,7]])})))()}},getters:{doneOrders:function(t){return t.orders.filter((function(t){return t.done}))},undoneOrders:function(t){return t.orders.filter((function(t){return!t.done}))},orders:function(t,e){return e.undoneOrders.concat(e.doneOrders)}}};a["a"].use($["a"]);var z=new $["a"].Store({modules:{posts:U,user:D,shared:q,orders:B}}),M=function(t,e,r){z.getters.user?r():r("/login?loginError=true")},W=function(){var t=this,e=t.$createElement,r=t._self._c||e;return t.loading?r("div",[r("v-container",[r("v-layout",{staticClass:"fullsize",attrs:{row:"","align-center":""}},[r("v-flex",{staticClass:"text-center",attrs:{xs12:""}},[r("v-progress-circular",{attrs:{indeterminate:"",color:"orange",size:"128",width:"8"}})],1)],1)],1)],1):r("div",[r("v-container",[r("v-layout",{attrs:{row:""}},[r("v-flex",{attrs:{xs12:""}},[r("v-carousel",t._l(t.promoPosts,(function(e){return r("v-carousel-item",{key:e.id,attrs:{src:e.imageSrc,contain:""}},[r("div",{staticClass:"carousel-link"},[r("v-btn",{attrs:{color:"orange",to:"/post/"+e.id}},[t._v(" "+t._s(e.title))])],1)])})),1)],1)],1)],1),r("v-container",{attrs:{"grid-list-lg":""}},[r("v-layout",{attrs:{row:"",wrap:""}},t._l(t.posts,(function(e){return r("v-flex",{key:e.id,attrs:{xs12:"",sm6:"",md4:""}},[r("v-card",{staticClass:"mx-auto elevation-10",attrs:{"max-width":"400",xs12:"",md4:"",lg4:""}},[r("v-img",{staticClass:"orange--text align-start",attrs:{height:"200px",src:e.imageSrc,alt:"post.title",contain:""}},[r("v-card-title",[t._v(t._s(e.title))])],1),r("v-card-subtitle",{staticClass:"pb-0"},[t._v(" "+t._s(e.title)+" ")]),r("v-card-text",{staticClass:"text--primary text--overflow",attrs:{"max-height":"10px"}},[r("div",[t._v(" "+t._s(e.description))])]),r("v-card-actions",[r("v-spacer"),r("v-btn",{attrs:{color:"orange",text:"",to:"/post/"+e.id}},[t._v(" Подробнее ")]),r("app-buy-modal",{attrs:{post:e}})],1)],1)],1)})),1)],1)],1)},N=[],J={computed:{promoPosts:function(){return this.$store.getters.promoPosts},posts:function(){return this.$store.getters.posts},loading:function(){return this.$store.getters.loading}}},H=J,K=(r("dbc2"),r("b0af")),G=r("99d9"),Q=r("5e66"),X=r("3e35"),Y=r("a523"),Z=r("0e8f"),tt=r("adda"),et=r("490a"),rt=Object(l["a"])(H,W,N,!1,null,null,null),at=rt.exports;u()(rt,{VBtn:m["a"],VCard:K["a"],VCardActions:G["a"],VCardSubtitle:G["b"],VCardText:G["c"],VCardTitle:G["d"],VCarousel:Q["a"],VCarouselItem:X["a"],VContainer:Y["a"],VFlex:Z["a"],VImg:tt["a"],VLayout:h["a"],VProgressCircular:et["a"],VSpacer:_["a"]});var nt=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("v-container",{attrs:{fluid:"","fill-height":""}},[r("v-layout",{attrs:{"justify-center":"","align-center":""}},[r("v-flex",{attrs:{xs12:"",sm9:"",md4:""}},[r("h2",{staticClass:"text--secondary mb-3"},[t._v("Логин")]),r("v-form",{ref:"form",attrs:{"lazy-validation":""},model:{value:t.valid,callback:function(e){t.valid=e},expression:"valid"}},[r("v-text-field",{attrs:{"prepend-icon":"mdi-login",label:"Email",name:"email",rules:t.emailRules,required:"","validate-on-blur":""},model:{value:t.email,callback:function(e){t.email=e},expression:"email"}}),r("v-text-field",{attrs:{"prepend-icon":"mdi-lock",name:"password",type:"password",label:"Пароль",couter:6,hint:"Не менее 6 символов",rules:t.passwordRules,required:"","validate-on-blur":""},model:{value:t.password,callback:function(e){t.password=e},expression:"password"}}),r("v-flex",{attrs:{"text-center":""}},[r("v-btn",{attrs:{loading:t.loading,disabled:!t.valid||t.loading},on:{click:t.onSubmit}},[t._v(" Войти ")])],1)],1)],1)],1)],1)},st=[],ot={data:function(){return{email:"",password:"",valid:!1,emailRules:[function(t){return!!t||"Поле Email обязательно для заполнения"},function(t){return/.+@.+\..+/.test(t)||"Некорректный Email"}],passwordRules:[function(t){return!!t||"Поле пароль обязательно для заполнения"},function(t){return t&&t.length>=6||"Минимум 6 символов"}]}},computed:{loading:function(){return this.$store.getters.loading}},methods:{onSubmit:function(){var t=this;if(this.$refs.form.validate()){var e={email:this.email,password:this.password};this.$store.dispatch("loginUser",e).then((function(){t.$router.push("/")})).catch((function(){}))}}},created:function(){this.$route.query["loginError"]&&this.$store.dispatch("setError","Не достпуно для незарегистрированных пользователей")}},it=ot,lt=r("4bd4"),ct=r("8654"),ut=Object(l["a"])(it,nt,st,!1,null,null,null),dt=ut.exports;u()(ut,{VBtn:m["a"],VContainer:Y["a"],VFlex:Z["a"],VForm:lt["a"],VLayout:h["a"],VTextField:ct["a"]});var pt=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("v-container",{attrs:{fluid:"","fill-height":""}},[r("v-layout",{attrs:{"justify-center":"","align-center":""}},[r("v-flex",{attrs:{xs12:"",sm9:"",md4:""}},[r("h2",{staticClass:"text--secondary mb-3"},[t._v("Регистрация")]),r("v-form",{ref:"form",attrs:{"lazy-validation":""},model:{value:t.valid,callback:function(e){t.valid=e},expression:"valid"}},[r("v-text-field",{attrs:{"prepend-icon":"mdi-account",label:"Имя",name:"name",rules:t.nameRules,hint:"Не менее 2 символов",required:"","validate-on-blur":""},model:{value:t.name,callback:function(e){t.name=e},expression:"name"}}),r("v-text-field",{attrs:{"prepend-icon":"mdi-login",label:"Email",name:"email",rules:t.emailRules,required:"","validate-on-blur":""},model:{value:t.email,callback:function(e){t.email=e},expression:"email"}}),r("v-text-field",{attrs:{"prepend-icon":"mdi-lock",name:"password",type:"password",label:"Пароль",couter:6,hint:"Не менее 6 символов",rules:t.passwordRules,required:"","validate-on-blur":""},model:{value:t.password,callback:function(e){t.password=e},expression:"password"}}),r("v-text-field",{attrs:{"prepend-icon":"mdi-lock",name:"confirm-password",type:"password",label:"Подтвердите пароль",couter:6,hint:"Не менее 6 символов",rules:t.confirmPasswordRules,required:"","validate-on-blur":""},model:{value:t.confirmPassword,callback:function(e){t.confirmPassword=e},expression:"confirmPassword"}}),r("v-flex",{attrs:{"text-center":""}},[r("v-btn",{attrs:{loading:t.loading,disabled:!t.valid||t.loading},on:{click:t.onSubmit}},[t._v(" Регистрация ")])],1)],1)],1)],1)],1)},vt=[],mt={data:function(){var t=this;return{email:"",password:"",name:"",confirmPassword:"",valid:!1,nameRules:[function(t){return!!t||"Имя обязательно для заполнения"},function(t){return t&&t.length>=2||"Минимум 2 символа"}],emailRules:[function(t){return!!t||"Поле Email обязательно для заполнения"},function(t){return/.+@.+\..+/.test(t)||"Некорректный Email"}],passwordRules:[function(t){return!!t||"Введите пароль"},function(t){return t&&t.length>=6||"Минимум 6 символов"}],confirmPasswordRules:[function(t){return!!t||"Введите пароль"},function(e){return e===t.password||"Пароли не совпадают"}]}},computed:{loading:function(){return this.$store.getters.loading}},methods:{onSubmit:function(){var t=this;if(this.$refs.form.validate()){var e={name:this.name,email:this.email,password:this.password};this.$store.dispatch("registerUser",e).then((function(){t.$router.push("/login")})).catch((function(){}))}}}},ft=mt,ht=Object(l["a"])(ft,pt,vt,!1,null,null,null),gt=ht.exports;u()(ht,{VBtn:m["a"],VContainer:Y["a"],VFlex:Z["a"],VForm:lt["a"],VLayout:h["a"],VTextField:ct["a"]});var xt=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("v-container",[r("v-layout",{attrs:{row:""}},[t.loading?r("v-flex",{staticClass:"text-center pt-5",attrs:{xs12:""}},[r("v-progress-circular",{attrs:{indeterminate:"",color:"orange",size:"128",width:"8"}})],1):t.loading||0===t.orders.length?r("v-flex",{staticClass:"text-center pt-5",attrs:{xs12:""}},[r("h2",{staticClass:"text--secondary mt-5"},[t._v("Пока что нет предложений")])]):r("v-flex",{attrs:{xs12:"",sm6:"","offset-sm3":""}},[r("v-list",{attrs:{flat:"",subheader:"","three-line":""}},[r("h2",{staticClass:"text--secondary my-3"},[t._v("Покупатели")]),t._l(t.orders,(function(e){return r("v-list-item",{key:e.name},[r("v-list-item-action",[r("v-checkbox",{attrs:{"input-value":e.done},on:{change:function(r){return t.markDone(e)}}})],1),r("v-list-item-content",[r("v-list-item-title",[t._v(t._s(e.name))]),r("v-list-item-subtitle",[t._v(t._s(e.phone))])],1),r("v-list-item-action",[r("v-btn",{attrs:{to:"/post/"+e.postId}},[t._v("Далее")])],1)],1)}))],2)],1)],1)],1)},bt=[],wt={data:function(){return{}},computed:{loading:function(){return this.$store.getters.loading},orders:function(){return this.$store.getters.orders}},methods:{markDone:function(t){this.$store.dispatch("markOrderDone",t.id).then((function(){t.done=!0})).catch((function(){}))}},created:function(){this.$store.dispatch("fetchOrders")}},yt=wt,Vt=r("ac7c"),_t=r("1800"),kt=Object(l["a"])(yt,xt,bt,!1,null,null,null),Ct=kt.exports;u()(kt,{VBtn:m["a"],VCheckbox:Vt["a"],VContainer:Y["a"],VFlex:Z["a"],VLayout:h["a"],VList:g["a"],VListItem:x["a"],VListItemAction:_t["a"],VListItemContent:b["a"],VListItemSubtitle:b["b"],VListItemTitle:b["c"],VProgressCircular:et["a"]});var Lt=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("v-container",[t.loading||0===t.myPosts.length?t.loading||0!==t.myPosts.length?r("v-layout",{staticClass:"fullsize",attrs:{row:"","align-center":""}},[r("v-flex",{staticClass:"text-center",attrs:{xs12:""}},[r("v-progress-circular",{attrs:{indeterminate:"",color:"orange",size:"128",width:"8"}})],1)],1):r("v-layout",[r("v-flex",{staticClass:"text-xs-center",attrs:{xs12:""}},[r("h2",{staticClass:"text--secondary mt-5"},[t._v(" У вас пока что нет своих объявлений ")])])],1):r("v-layout",{attrs:{row:""}},[r("v-flex",{attrs:{xs12:"",sm8:"","offset-sm2":""}},[r("h2",{staticClass:"text--secondary my-3"},[t._v("Мои объявления")]),t._l(t.myPosts,(function(e){return r("v-card",{key:e.title,staticClass:"mb-5 mx-1",attrs:{elevation:"10"}},[r("v-layout",{staticClass:"ma-0",attrs:{row:""}},[r("v-flex",{attrs:{xs12:"",sm6:""}},[r("v-img",{staticClass:"orange--text ma-1",attrs:{"max-width":"300px","max-height":"200px",src:e.imageSrc,alt:"post.title",contain:""}})],1),r("v-flex",{attrs:{"align-self-start":"",sm6:""}},[r("v-card-title",{staticClass:"text-h6 orange--text text-no-wrap"},[t._v(" "+t._s(e.title))]),r("v-card-text",[t._v(t._s(e.description))]),r("v-card-actions",[r("v-spacer"),r("v-btn",{attrs:{to:"/post/"+e.id}},[t._v("Открыть")])],1)],1)],1)],1)}))],2)],1)],1)},Et=[],Ot={computed:{myPosts:function(){return this.$store.getters.myPosts},loading:function(){return this.$store.getters.loading}}},Pt=Ot,$t=Object(l["a"])(Pt,Lt,Et,!1,null,null,null),It=$t.exports;u()($t,{VBtn:m["a"],VCard:K["a"],VCardActions:G["a"],VCardText:G["c"],VCardTitle:G["d"],VContainer:Y["a"],VFlex:Z["a"],VImg:tt["a"],VLayout:h["a"],VProgressCircular:et["a"],VSpacer:_["a"]});var jt=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("v-container",[r("v-layout",{attrs:{row:""}},[r("v-flex",{attrs:{xs12:"",sm6:"","offset-sm3":""}},[r("h2",{staticClass:"text--secondary my-3"},[t._v("Создать объявление")]),r("v-form",{ref:"form",staticClass:"px-5",attrs:{"lazy-validation":""},model:{value:t.valid,callback:function(e){t.valid=e},expression:"valid"}},[r("v-text-field",{attrs:{type:"text",label:"Заголовок",name:"title",hint:"Не менее 6 символов",rules:t.titleRules,"validate-on-blur":"",required:""},model:{value:t.title,callback:function(e){t.title=e},expression:"title"}}),r("v-textarea",{attrs:{type:"text-area",rows:"1",name:"description",label:"Описание",hint:"Описание товара или услуги",rules:t.descriptionRules,required:"","validate-on-blur":"",maxlength:"240",counter:"","auto-grow":""},model:{value:t.description,callback:function(e){t.description=e},expression:"description"}}),r("v-file-input",{attrs:{accept:"image/*",type:"file",label:"Загрузите изображение",rules:t.fileRules,required:"","validate-on-blur":""},on:{change:t.onFileChange}}),r("v-checkbox",{staticClass:"mb-2",attrs:{label:"Рекламное объявление"},model:{value:t.promo,callback:function(e){t.promo=e},expression:"promo"}}),r("v-flex",{attrs:{"text-center":""}},[r("v-btn",{attrs:{disabled:!t.valid||t.loading,loading:t.loading},on:{click:t.createPost}},[t._v(" Добавить ")])],1)],1)],1)],1)],1)},Rt=[],St={data:function(){return{title:"",description:"",promo:!1,valid:!1,image:null,imageSrc:"",titleRules:[function(t){return!!t||"Добавьте заголовок"},function(t){return t&&t.length>=6||"Минимум 6 символов"}],descriptionRules:[function(t){return!!t||"Добавьте описание"},function(t){return t&&t.length<=240||"Максимум 240 символов"}],fileRules:[function(t){return!!t||"Добавьте изображение"}]}},computed:{loading:function(){return this.$store.getters.loading}},methods:{createPost:function(){var t=this;if(this.$refs.form.validate()){var e={title:this.title,description:this.description,promo:this.promo,image:this.image};console.log(e),this.$store.dispatch("createPost",e).then((function(){t.$router.push("/list")})).catch((function(){}))}},onFileChange:function(t){var e=this,r=new FileReader;r.onload=function(){e.imageSrc=r.result},r.readAsDataURL(t),this.image=t}}},Tt=St,Ut=r("23a7"),Ft=r("a844"),Dt=Object(l["a"])(Tt,jt,Rt,!1,null,null,null),qt=Dt.exports;u()(Dt,{VBtn:m["a"],VCheckbox:Vt["a"],VContainer:Y["a"],VFileInput:Ut["a"],VFlex:Z["a"],VForm:lt["a"],VLayout:h["a"],VTextField:ct["a"],VTextarea:Ft["a"]});var At=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("v-container",[r("v-layout",{attrs:{row:""}},[r("v-flex",{attrs:{xs12:"",sm8:"","offset-sm2":""}},[t.loading?r("div",[r("v-container",[r("v-layout",{staticClass:"fullsize",attrs:{row:"","align-center":""}},[r("v-flex",{staticClass:"text-center",attrs:{xs12:""}},[r("v-progress-circular",{attrs:{indeterminate:"",color:"orange",size:"128",width:"8"}})],1)],1)],1)],1):r("v-card",{staticClass:"mt-5  pa-5"},[r("v-layout",{attrs:{row:"","justify-center":"","align-center":""}},[r("v-flex",{attrs:{xs12:"",sm6:""}},[r("v-img",{attrs:{src:t.post.imageSrc,contain:"","max-width":"400px","max-height":"400px"}})],1),r("v-flex",{attrs:{xs12:"",sm6:""}},[r("v-layout",{attrs:{column:"","align-center":""}},[r("v-card-title",{staticClass:"orange--text text-center"},[t._v(t._s(t.post.title))]),r("v-card-text",{staticClass:"text-center"},[t._v(t._s(t.post.description))]),r("v-card-actions",{staticClass:"mt-1"},[t.isOwner?r("appEditPostModal",{attrs:{post:t.post}}):t._e(),t.isOwner?t._e():r("app-buy-modal",{attrs:{post:t.post}})],1)],1)],1)],1)],1)],1)],1)],1)},Bt=[],zt=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticClass:"text-center"},[r("v-dialog",{attrs:{"max-width":"800px"},scopedSlots:t._u([{key:"activator",fn:function(e){var a=e.on,n=e.attrs;return[r("v-btn",t._g(t._b({staticClass:"mr-3"},"v-btn",n,!1),a),[t._v(" Редактировать ")])]}}]),model:{value:t.dialog,callback:function(e){t.dialog=e},expression:"dialog"}},[r("v-card",[r("v-layout",{attrs:{column:""}},[r("v-flex",{attrs:{xs12:""}},[r("v-card-title",{staticClass:"grey lighten-2"},[t._v(" Редактировать объявление ")])],1),r("v-flex",{attrs:{xs12:""}},[r("v-card-text",[r("v-text-field",{attrs:{name:"title",type:"text",required:"","validate-on-blur":"",placeholder:"Заголовок"},model:{value:t.editedTitle,callback:function(e){t.editedTitle=e},expression:"editedTitle"}}),r("v-textarea",{attrs:{name:"description",type:"text-area",required:"","validate-on-blur":"",maxlength:"240",counter:"","auto-grow":"",placeholder:"Описание"},model:{value:t.editedDescription,callback:function(e){t.editedDescription=e},expression:"editedDescription"}})],1)],1),r("v-divider"),r("v-flex",{attrs:{xs12:""}},[r("v-card-actions",[r("v-spacer"),r("v-btn",{attrs:{text:""},on:{click:t.onCancel}},[t._v(" Отменить ")]),r("v-btn",{attrs:{color:"orange"},on:{click:t.onSave}},[t._v(" Сохранить ")])],1)],1)],1)],1)],1)],1)},Mt=[],Wt={props:["post"],data:function(){return{dialog:!1,editedDescription:this.post.editedDescription,editedTitle:this.post.editedTitle}},methods:{onCancel:function(){this.editedDescription=this.post.description,this.editedTitle=this.post.title,this.dialog=!1},onSave:function(){""!==this.editedDescription&&""!==this.editedTitle&&(this.$store.dispatch("updatePost",{title:this.editedTitle,description:this.editedDescription,id:this.post.id}),this.dialog=!1)}}},Nt=Wt,Jt=r("169a"),Ht=r("ce7e"),Kt=Object(l["a"])(Nt,zt,Mt,!1,null,null,null),Gt=Kt.exports;u()(Kt,{VBtn:m["a"],VCard:K["a"],VCardActions:G["a"],VCardText:G["c"],VCardTitle:G["d"],VDialog:Jt["a"],VDivider:Ht["a"],VFlex:Z["a"],VLayout:h["a"],VSpacer:_["a"],VTextField:ct["a"],VTextarea:Ft["a"]});var Qt={props:["id"],computed:{post:function(){var t=this.id;return this.$store.getters.postById(t)},loading:function(){return this.$store.getters.loading},isOwner:function(){return this.post.ownerId===this.$store.getters.user.id}},components:{appEditPostModal:Gt}},Xt=Qt,Yt=Object(l["a"])(Xt,At,Bt,!1,null,null,null),Zt=Yt.exports;u()(Yt,{VCard:K["a"],VCardActions:G["a"],VCardText:G["c"],VCardTitle:G["d"],VContainer:Y["a"],VFlex:Z["a"],VImg:tt["a"],VLayout:h["a"],VProgressCircular:et["a"]}),a["a"].use(P["a"]);var te=[{path:"",name:"home",component:at},{path:"/login",name:"login",component:dt},{path:"/registration",name:"registration",component:gt},{path:"/orders",name:"allPosts",component:Ct,beforeEnter:M},{path:"/new",name:"newPost",component:qt,beforeEnter:M},{path:"/list",name:"MyPosts",component:It,beforeEnter:M},{path:"/post/:id",props:!0,name:"post",component:Zt,beforeEnter:M}],ee=new P["a"]({mode:"history",base:"/",routes:te}),re=ee,ae=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticClass:"text-center"},[r("v-dialog",{attrs:{"max-width":"800px"},scopedSlots:t._u([{key:"activator",fn:function(e){var a=e.on,n=e.attrs;return[r("v-btn",t._g(t._b({staticClass:"mr-3",attrs:{color:"orange"}},"v-btn",n,!1),a),[t._v(" Купить ")])]}}]),model:{value:t.dialog,callback:function(e){t.dialog=e},expression:"dialog"}},[r("v-card",[r("v-layout",{attrs:{column:""}},[r("v-flex",{attrs:{xs12:""}},[r("v-card-title",{staticClass:"grey lighten-2"},[t._v(" Оставить заявку ")])],1),r("v-flex",{attrs:{xs12:""}},[r("v-card-text",[r("v-text-field",{attrs:{name:"name",type:"text",required:"","validate-on-blur":"",placeholder:"Ваше имя"},model:{value:t.name,callback:function(e){t.name=e},expression:"name"}}),r("v-text-field",{attrs:{name:"phone",type:"text",required:"","validate-on-blur":"",placeholder:"Ваш телефон"},model:{value:t.phone,callback:function(e){t.phone=e},expression:"phone"}})],1)],1),r("v-divider"),r("v-flex",{attrs:{xs12:""}},[r("v-card-actions",[r("v-spacer"),r("v-btn",{attrs:{text:"",disabled:t.localLoading},on:{click:t.onCancel}},[t._v(" Закрыть ")]),r("v-btn",{attrs:{color:"orange",disabled:t.localLoading,loading:t.localLoading},on:{click:t.onSave}},[t._v(" Купить ")])],1)],1)],1)],1)],1)],1)},ne=[],se=(r("d3b7"),{props:["post"],data:function(){return{dialog:!1,name:"",phone:"",localLoading:!1}},methods:{onCancel:function(){this.name="",this.phone="",this.dialog=!1},onSave:function(){var t=this;""!==this.name&&""!==this.phone&&(this.localLoading=!0,this.$store.dispatch("createOrder",{name:this.name,phone:this.phone,postId:this.post.id,ownerId:this.post.ownerId}).finally((function(){t.name="",t.phone="",t.localLoading=!1,t.dialog=!1})))}}}),oe=se,ie=Object(l["a"])(oe,ae,ne,!1,null,null,null),le=ie.exports;u()(ie,{VBtn:m["a"],VCard:K["a"],VCardActions:G["a"],VCardText:G["c"],VCardTitle:G["d"],VDialog:Jt["a"],VDivider:Ht["a"],VFlex:Z["a"],VLayout:h["a"],VSpacer:_["a"],VTextField:ct["a"]}),a["a"].config.productionTip=!1,a["a"].component("app-buy-modal",le),new a["a"]({vuetify:O,router:re,store:z,render:function(t){return t(L)},created:function(){var t=this;S["initializeApp"]({apiKey:"AIzaSyDHMbqkBg5LEzSj4iNW-8RL8uyWofLwrok",authDomain:"vue-bulletin-board-c8ec1.firebaseapp.com",databaseURL:"https://vue-bulletin-board-c8ec1.firebaseio.com",projectId:"vue-bulletin-board-c8ec1",storageBucket:"vue-bulletin-board-c8ec1.appspot.com",messagingSenderId:"146455383263",appId:"1:146455383263:web:6e6474081b5724bacb6d6a"}),S["auth"]().onAuthStateChanged((function(e){e&&t.$store.dispatch("autoLoginUser",e)})),this.$store.dispatch("fetchPosts")}}).$mount("#app")},"5c0b":function(t,e,r){"use strict";var a=r("9c0c"),n=r.n(a);n.a},"9c0c":function(t,e,r){},dbc2:function(t,e,r){"use strict";var a=r("4251"),n=r.n(a);n.a}});
//# sourceMappingURL=app.616a1005.js.map